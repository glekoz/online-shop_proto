syntax = "proto3";

import "google/protobuf/empty.proto";

option go_package = "github.com/glekoz/online-shop_proto/product";

service GRPCProduct {
  rpc Create(Product) returns (ID);
  rpc Get(ID) returns (Product);
  rpc GetAll(Filter) returns (GetAllResponse);
  rpc Delete(ID) returns(google.protobuf.Empty);
  rpc Update(UpdateRequest) returns (google.protobuf.Empty);
}

message Filter {
  string name = 1;
  int32 lowPrice = 2;
  int32 highPrice = 3;
  string orderBy = 4;
  int32 page = 5;
  int32 pageSize = 6;
}

message Product {
  string name = 1;
  string description = 2;
  int32 price = 3;
}

message ProductDigest {
  string id = 1;
  string name = 2;
  int32 price = 3;
}

message UpdateRequest {
  string id = 1;
  Product product = 2;
}

message ID {
  string id = 1;
}

message GetAllResponse {
  repeated ProductDigest products = 1;
}

// protoc -I ./proto --go_out ./product --go-grpc_out ./product --go_opt paths=source_relative --go-grpc_opt paths=source_relative .\proto\product.proto